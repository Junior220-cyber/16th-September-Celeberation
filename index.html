<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PNG 50th Independence Celebration</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body class="flex items-center justify-center min-h-screen m-0 font-sans text-white relative overflow-x-hidden bg-gradient-to-b from-green-600 via-yellow-400 to-black">

  <!-- Fireworks -->
  <canvas id="fireworksCanvas" class="fixed inset-0 w-full h-full pointer-events-none z-0"></canvas>

  <!-- Countdown -->
  <div id="countdown" class="absolute top-2 right-2 bg-white/20 text-black p-2 rounded-xl text-center text-xs sm:text-sm z-10">
    <h2 class="font-bold">Countdown ðŸŽ†</h2>
    <p id="time"></p>
  </div>

  <!-- Mute Button -->
  <div class="absolute top-2 left-1/2 transform -translate-x-1/2 z-10">
    <button id="muteBtn" class="bg-yellow-400 text-black font-bold px-3 py-1 rounded-xl">Mute Anthem ðŸ”‡</button>
  </div>

  <!-- Celebration Container -->
  <div class="flex flex-col lg:flex-row items-center justify-center z-10 max-w-full p-2 space-y-4 lg:space-y-0 lg:space-x-6">

    <!-- Flag Video Top (mobile) / Left (desktop) -->
    <video class="w-48 sm:w-56 md:w-64 lg:w-72 xl:w-80 rounded-lg shadow-lg opacity-90 animate-pulse order-1 lg:order-1"
      src="PNG Flag.mp4" autoplay loop muted playsinline></video>

    <!-- Text Container -->
    <div id="celebration" class="flex-1 text-center bg-white/10 p-4 rounded-2xl shadow-lg max-w-lg order-2 lg:order-2">
      <!-- Default (before submit) -->
      <div id="formSection">
        <h1 class="text-lg sm:text-xl md:text-2xl font-bold mb-2">ðŸŽ‰ A Independence Celebration Gift from Jessy APENDA ðŸŽ‰</h1>
        <p class="text-sm sm:text-base mb-3">Please enter your name to join the celebration of PNGâ€™s 50th Independence.</p>
        <input type="text" id="username" placeholder="Enter your name"
          class="px-3 py-2 rounded-xl text-black w-4/5 max-w-xs mb-2">
        <br>
        <button id="celebrateBtn" class="px-4 py-2 rounded-xl bg-yellow-400 text-black font-bold">Celebrate ðŸŽŠ</button>
      </div>
      <!-- After submit (celebration message goes here) -->
      <div id="greetingSection" class="hidden"></div>
    </div>

    <!-- Bird of Paradise Video Bottom (mobile) / Right (desktop) -->
    <video class="w-48 sm:w-56 md:w-64 lg:w-72 xl:w-80 rounded-lg shadow-lg opacity-90 animate-pulse order-3 lg:order-3"
      src="Bird of Paradise.mp4" autoplay loop muted playsinline></video>
  </div>

  <!-- Audio -->
  <audio id="anthem" src="PNG National Anthem.mp3" loop></audio>

  <script>
    const countdownEl = document.getElementById("countdown");
    const timeEl = document.getElementById("time");
    const celebrateBtn = document.getElementById("celebrateBtn");
    const usernameInput = document.getElementById("username");
    const formSection = document.getElementById("formSection");
    const greetingSection = document.getElementById("greetingSection");
    const anthem = document.getElementById("anthem");
    const muteBtn = document.getElementById("muteBtn");
    const canvas = document.getElementById("fireworksCanvas");

    let anthemMuted = false;
    const balloons = [];
    const balloonEmojis = ["ðŸŽˆ","ðŸŸ¢","ðŸ”µ","ðŸŸ¡","â­","âœ¨"];
    const ribbonEmojis = ["ðŸŽ€","ðŸŽ—ï¸","ðŸŽ‰"];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const targetDate = new Date("2025-09-16T00:00:00").getTime();

    function updateCountdown() {
      const now = new Date().getTime();
      const diff = targetDate - now;
      if (diff > 0) {
        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff / (1000*60*60)) % 24);
        const minutes = Math.floor((diff / (1000*60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);
        timeEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      } else {
        timeEl.textContent = `0d 0h 0m 0s`;
        countdownEl.classList.add("bg-red-600", "text-white", "animate-pulse");
        startCelebration();
      }
    }

    function startFireworks() {
      const duration = 10 * 1000;
      const end = Date.now() + duration;
      const particleCount = window.innerWidth < 600 ? 3 : 6; // subtle confetti

      (function frame() {
        confetti({particleCount, angle:60, spread:40, origin:{x:0.25, y:0.3}});
        confetti({particleCount, angle:120, spread:40, origin:{x:0.75, y:0.3}});
        if (Date.now() < end) requestAnimationFrame(frame);
      })();
    }

    function spawnBalloons() {
      setInterval(() => {
        if(balloons.length > 12) return; // reduce balloon number

        // Balloon
        const balloon = document.createElement("div");
        balloon.className = "absolute text-2xl z-10";
        balloon.innerHTML = balloonEmojis[Math.floor(Math.random()*balloonEmojis.length)];
        balloon.style.left = Math.random() * window.innerWidth + "px";
        balloon.style.top = "-40px";
        balloon.style.transition = "top 7s linear, opacity 7s linear";
        document.body.appendChild(balloon);
        balloons.push(balloon);

        setTimeout(() => {
          balloon.style.top = window.innerHeight + "px";
          balloon.style.opacity = "0";
        }, 50);

        setTimeout(() => {
          balloon.remove();
          balloons.shift();
        }, 7500);

        // Ribbon
        const ribbon = document.createElement("div");
        ribbon.className = "absolute text-xl z-10";
        ribbon.innerHTML = ribbonEmojis[Math.floor(Math.random()*ribbonEmojis.length)];
        ribbon.style.left = Math.random() * window.innerWidth + "px";
        ribbon.style.top = "-40px";
        ribbon.style.transition = "top 7s linear, opacity 7s linear";
        document.body.appendChild(ribbon);
        balloons.push(ribbon);

        setTimeout(() => {
          ribbon.style.top = window.innerHeight + "px";
          ribbon.style.opacity = "0";
        }, 50);

        setTimeout(() => {
          ribbon.remove();
          balloons.shift();
        }, 7500);

      }, 1000);
    }

    function startCelebration() {
      if(!anthemMuted) anthem.play();
      startFireworks();
      showGreeting();
      spawnBalloons();
    }

    function showGreeting() {
      const name = usernameInput.value || "Friend";
      formSection.classList.add("hidden");
      greetingSection.classList.remove("hidden");
      greetingSection.innerHTML = `
        <h2 class="text-lg sm:text-xl font-bold">Hi ${name}, ðŸŽˆ Congratulations and Happy 50th Independence to You! ðŸŽ‰</h2>
        <p class="text-sm sm:text-base mt-2">As you celebrate this remarkable golden jubilee, may the vibrant spirit of unity, the richness of your diverse cultures, and the precious gift of freedom continue to be the cornerstones of this nation.<br><br>God bless Papua New Guinea!</p>
      `;
    }

    muteBtn.addEventListener("click", () => {
      anthemMuted = !anthemMuted;
      anthem.muted = anthemMuted;
      muteBtn.textContent = anthemMuted ? "Unmute Anthem ðŸ”Š" : "Mute Anthem ðŸ”‡";
      if(!anthemMuted) anthem.play();
    });

    celebrateBtn.addEventListener("click", startCelebration);
    setInterval(updateCountdown, 1000);
    updateCountdown();
  </script>
</body>
</html>
