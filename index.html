<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PNG 50th Independence Celebration</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(to bottom, #16a34a, #facc15, #000);
      overflow-x: hidden;
      color: white;
      position: relative;
    }
    #fireworksCanvas {
      position: fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:0;
    }
    .container-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      position: relative;
      z-index: 10;
      max-width: 100%;
    }
    .container {
      flex: 1 1 300px;
      text-align: center;
      background: rgba(255,255,255,0.1);
      padding: 1.5rem;
      border-radius: 1.5rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
      margin: 1rem;
    }
    input {
      padding: 0.5rem 1rem;
      border-radius: 1rem;
      border: none;
      font-size: 1rem;
      margin-bottom: 1rem;
      width: 100%;
      max-width: 250px;
    }
    button {
      padding: 0.5rem 1rem;
      border-radius: 1rem;
      border: none;
      font-weight: bold;
      background-color: #facc15;
      color: black;
      cursor: pointer;
      margin: 0.3rem;
    }
    .countdown {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255,255,255,0.2);
      color: black;
      padding: 0.8rem;
      border-radius: 1rem;
      text-align: center;
      z-index:10;
      font-size: 0.9rem;
    }
    .countdown.active {
      background: red;
      color: white;
      animation: pulse 1s infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    .side-video {
      width: 240px;
      max-width: 40vw;
      height: auto;
      border-radius: 0.5rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      opacity: 0.9;
      animation: float 4s ease-in-out infinite alternate;
      margin: 0.5rem;
    }
    @keyframes float {
      0% { transform: translateY(0px); }
      100% { transform: translateY(-20px); }
    }
    .balloon, .ribbon {
      position: absolute;
      font-size: 2rem;
      z-index: 10;
    }
    .music-controls {
      position: absolute;
      top: 1rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
    }

    /* ✅ Tablet adjustments */
    @media (max-width: 768px) {
      .container-wrapper {
        flex-direction: column;
      }
      .side-video {
        max-width: 80vw;
      }
      .container {
        font-size: 0.9rem;
        padding: 1rem;
      }
      h1 {
        font-size: 1.3rem;
      }
      .countdown {
        top: auto;
        bottom: 1rem;
        right: 50%;
        transform: translateX(50%);
        font-size: 0.8rem;
      }
    }

    /* ✅ Very small devices */
    @media (max-width: 400px) {
      .side-video {
        display: none;
      }
      .container {
        margin: 0.5rem;
        padding: 1rem;
        font-size: 0.85rem;
      }
      h1 {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>

  <canvas id="fireworksCanvas"></canvas>

  <!-- Countdown -->
  <div class="countdown" id="countdown">
    <h2>Countdown 🎆</h2>
    <p id="time"></p>
  </div>

  <!-- Mute Button -->
  <div class="music-controls">
    <button id="muteBtn">Mute Anthem 🔇</button>
  </div>

  <!-- Celebration + Videos -->
  <div class="container-wrapper">
    <!-- Flag Video Left -->
    <video class="side-video" src="PNG Flag.mp4" autoplay loop muted playsinline></video>

    <div class="container" id="celebration">
      <h1>🎉 A Independence Celebration Gift from Jessy APENDA 🎉</h1>
      <p>Please enter your name to join the celebration of PNG’s 50th Independence.</p>
      <input type="text" id="username" placeholder="Enter your name">
      <br>
      <button id="celebrateBtn">Celebrate 🎊</button>
    </div>

    <!-- Bird of Paradise Video Right -->
    <video class="side-video" src="Bird of Paradise.mp4" autoplay loop muted playsinline></video>
  </div>

  <!-- Audio -->
  <audio id="anthem" src="PNG National Anthem.mp3" loop></audio>
  <audio id="fireworkSound" src="firework-pop.mp3"></audio>
  <audio id="balloonPop" src="balloon-pop.mp3"></audio>

  <script>
    const countdownEl = document.getElementById("countdown");
    const timeEl = document.getElementById("time");
    const celebrationEl = document.getElementById("celebration");
    const celebrateBtn = document.getElementById("celebrateBtn");
    const usernameInput = document.getElementById("username");
    const anthem = document.getElementById("anthem");
    const fireworkSound = document.getElementById("fireworkSound");
    const balloonPop = document.getElementById("balloonPop");
    const muteBtn = document.getElementById("muteBtn");
    const canvas = document.getElementById("fireworksCanvas");

    let fireworksInterval;
    const balloons = [];
    const balloonEmojis = ["🎈","🟢","🔵","🟡","⭐","✨"];
    const ribbonEmojis = ["🎀","🎗️","🎉"];
    let anthemMuted = false;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const targetDate = new Date("2025-09-16T00:00:00").getTime();

    function updateCountdown() {
      const now = new Date().getTime();
      const diff = targetDate - now;
      if (diff > 0) {
        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff / (1000*60*60)) % 24);
        const minutes = Math.floor((diff / (1000*60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);
        timeEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      } else {
        timeEl.textContent = `0d 0h 0m 0s`;
        countdownEl.classList.add("active");
        startCelebration();
      }
    }

    function startFireworksAnimation() {
      const particleCount = window.innerWidth < 600 ? 8 : 20; // ✅ lighter on mobile
      fireworksInterval = setInterval(() => {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height / 2;
        confetti({ particleCount, spread: 100, origin: { x: x / canvas.width, y: y / canvas.height } });
        fireworkSound.currentTime = 0;
        fireworkSound.play();
      }, 600);
    }

    function startFireworks() {
      const duration = 15 * 1000;
      const end = Date.now() + duration;
      const particleCount = window.innerWidth < 600 ? 5 : 10; // ✅ scale fireworks
      (function frame() {
        confetti({particleCount, angle:60, spread:55, origin:{x:0}});
        confetti({particleCount, angle:120, spread:55, origin:{x:1}});
        fireworkSound.currentTime = 0;
        fireworkSound.play();
        if (Date.now() < end) requestAnimationFrame(frame);
      })();
    }

    function startCelebration() {
      if(!anthemMuted) anthem.play();
      startFireworks();
      startFireworksAnimation();
      showGreeting();
      spawnBalloons();
      animateBalloons();
    }

    function showGreeting() {
      const name = usernameInput.value || "Friend";
      celebrationEl.innerHTML = `
        <h1>Hi ${name}, 🎈 Congratulations and Happy 50th Independence to You! 🎉</h1>
        <p>As you celebrate this remarkable golden jubilee, may the vibrant spirit of unity, the richness of your diverse cultures, and the precious gift of freedom continue to be the cornerstones of this nation.<br><br>God bless Papua New Guinea!</p>
      `;
    }

    function spawnBalloons() {
      setInterval(() => {
        if (balloons.length > (window.innerWidth < 600 ? 8 : 15)) return; // ✅ fewer balloons on mobile
        const balloon = document.createElement("div");
        balloon.className = "balloon";
        balloon.innerHTML = balloonEmojis[Math.floor(Math.random()*balloonEmojis.length)];
        balloon.style.left = Math.random()*window.innerWidth + "px";
        balloon.style.top = "-50px";
        balloon.speedY = 1 + Math.random() * 2; 
        balloon.sway = Math.random() * 0.5;
        balloon.angle = Math.random() * Math.PI * 2;
        balloons.push(balloon);
        document.body.appendChild(balloon);

        if (window.innerWidth >= 600) { // ✅ ribbons only on larger screens
          const ribbon = document.createElement("div");
          ribbon.className = "ribbon";
          ribbon.innerHTML = ribbonEmojis[Math.floor(Math.random()*ribbonEmojis.length)];
          ribbon.style.left = Math.random()*window.innerWidth + "px";
          ribbon.style.top = "-50px";
          ribbon.speedY = 1 + Math.random() * 1.5;
          ribbon.sway = Math.random() * 0.5;
          ribbon.angle = Math.random() * Math.PI * 2;
          balloons.push(ribbon);
          document.body.appendChild(ribbon);
        }
      }, window.innerWidth < 600 ? 1500 : 1200);
    }

    function animateBalloons() {
      function animate() {
        for(let i = balloons.length-1; i>=0; i--){
          const b = balloons[i];
          let top = parseFloat(b.style.top);
          top += b.speedY;
          b.style.top = top + "px";
          b.style.left = parseFloat(b.style.left) + Math.sin(b.angle) * b.sway + "px";
          b.angle += 0.02;
          if(top > window.innerHeight + 50){
            balloonPop.currentTime = 0;
            balloonPop.play();
            b.remove();
            balloons.splice(i,1);
          }
        }
        requestAnimationFrame(animate);
      }
      animate();
    }

    muteBtn.addEventListener("click", () => {
      anthemMuted = !anthemMuted;
      anthem.muted = anthemMuted;
      muteBtn.textContent = anthemMuted ? "Unmute Anthem 🔊" : "Mute Anthem 🔇";
      if(!anthemMuted) anthem.play();
    });

    celebrateBtn.addEventListener("click", startCelebration);
    setInterval(updateCountdown, 1000);
    updateCountdown();
  </script>
</body>
</html>
